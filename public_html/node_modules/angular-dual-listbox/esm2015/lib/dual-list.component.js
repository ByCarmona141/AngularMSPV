import { Component, EventEmitter, Input, IterableDiffers, Output } from '@angular/core';
import { BasicList } from './basic-list';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '@angular/forms';

function DualListComponent_form_4_Template(rf, ctx) { if (rf & 1) {
    const _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "form", 11);
    ɵngcc0.ɵɵelementStart(1, "input", 12);
    ɵngcc0.ɵɵlistener("ngModelChange", function DualListComponent_form_4_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.available.picker = $event; })("ngModelChange", function DualListComponent_form_4_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.onFilter(ctx_r6.available); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngModel", ctx_r0.available.picker);
} }
const _c0 = function (a0, a1) { return { selected: a0, disabled: a1 }; };
function DualListComponent_li_7_Template(rf, ctx) { if (rf & 1) {
    const _r10 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 13);
    ɵngcc0.ɵɵlistener("click", function DualListComponent_li_7_Template_li_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const item_r7 = ctx.$implicit; const idx_r8 = ctx.index; const ctx_r9 = ɵngcc0.ɵɵnextContext(); ctx_r9.disabled ? null : ctx_r9.selectItem(ctx_r9.available.pick, item_r7); return ctx_r9.shiftClick($event, idx_r8, ctx_r9.available, item_r7); })("dragstart", function DualListComponent_li_7_Template_li_dragstart_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const item_r7 = ctx.$implicit; const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.drag($event, item_r7, ctx_r11.available); })("dragend", function DualListComponent_li_7_Template_li_dragend_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.dragEnd(ctx_r12.available); });
    ɵngcc0.ɵɵelementStart(1, "label");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r7 = ctx.$implicit;
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(3, _c0, ctx_r1.isItemSelected(ctx_r1.available.pick, item_r7), ctx_r1.disabled))("draggable", !ctx_r1.disabled && ctx_r1.format.draggable);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(item_r7._name);
} }
function DualListComponent_form_16_Template(rf, ctx) { if (rf & 1) {
    const _r14 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "form", 11);
    ɵngcc0.ɵɵelementStart(1, "input", 14);
    ɵngcc0.ɵɵlistener("ngModelChange", function DualListComponent_form_16_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.confirmed.picker = $event; })("ngModelChange", function DualListComponent_form_16_Template_input_ngModelChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.onFilter(ctx_r15.confirmed); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngModel", ctx_r2.confirmed.picker);
} }
function DualListComponent_li_19_Template(rf, ctx) { if (rf & 1) {
    const _r20 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "li", 13, 15);
    ɵngcc0.ɵɵlistener("click", function DualListComponent_li_19_Template_li_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const item_r16 = ctx.$implicit; const idx_r17 = ctx.index; const ctx_r19 = ɵngcc0.ɵɵnextContext(); ctx_r19.disabled ? null : ctx_r19.selectItem(ctx_r19.confirmed.pick, item_r16); return ctx_r19.shiftClick($event, idx_r17, ctx_r19.confirmed, item_r16); })("dragstart", function DualListComponent_li_19_Template_li_dragstart_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const item_r16 = ctx.$implicit; const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.drag($event, item_r16, ctx_r21.confirmed); })("dragend", function DualListComponent_li_19_Template_li_dragend_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r22 = ɵngcc0.ɵɵnextContext(); return ctx_r22.dragEnd(ctx_r22.confirmed); });
    ɵngcc0.ɵɵelementStart(2, "label");
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r16 = ctx.$implicit;
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(3, _c0, ctx_r3.isItemSelected(ctx_r3.confirmed.pick, item_r16), ctx_r3.disabled))("draggable", !ctx_r3.disabled && ctx_r3.format.draggable);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(item_r16._name);
} }
const _c1 = function (a0, a1) { return { "order": a0, "margin-left": a1 }; };
const _c2 = function (a0, a1) { return { "max-height": a0, "min-height": a1 }; };
const _c3 = function (a0) { return { over: a0 }; };
var nextId = 0;
export class DualListComponent {
    constructor(differs) {
        this.differs = differs;
        this.id = `dual-list-${nextId++}`;
        this.key = '_id';
        this.display = '_name';
        this.height = '100px';
        this.filter = false;
        this.format = DualListComponent.DEFAULT_FORMAT;
        this.sort = false;
        this.disabled = false;
        this.destinationChange = new EventEmitter();
        this.sorter = (a, b) => { return (a._name < b._name) ? -1 : ((a._name > b._name) ? 1 : 0); };
        this.available = new BasicList(DualListComponent.AVAILABLE_LIST_NAME);
        this.confirmed = new BasicList(DualListComponent.CONFIRMED_LIST_NAME);
    }
    ngOnChanges(changeRecord) {
        if (changeRecord['filter']) {
            if (changeRecord['filter'].currentValue === false) {
                this.clearFilter(this.available);
                this.clearFilter(this.confirmed);
            }
        }
        if (changeRecord['sort']) {
            if (changeRecord['sort'].currentValue === true && this.compare === undefined) {
                this.compare = this.sorter;
            }
            else if (changeRecord['sort'].currentValue === false) {
                this.compare = undefined;
            }
        }
        if (changeRecord['format']) {
            this.format = changeRecord['format'].currentValue;
            if (typeof (this.format.direction) === 'undefined') {
                this.format.direction = DualListComponent.LTR;
            }
            if (typeof (this.format.add) === 'undefined') {
                this.format.add = DualListComponent.DEFAULT_FORMAT.add;
            }
            if (typeof (this.format.remove) === 'undefined') {
                this.format.remove = DualListComponent.DEFAULT_FORMAT.remove;
            }
            if (typeof (this.format.all) === 'undefined') {
                this.format.all = DualListComponent.DEFAULT_FORMAT.all;
            }
            if (typeof (this.format.none) === 'undefined') {
                this.format.none = DualListComponent.DEFAULT_FORMAT.none;
            }
            if (typeof (this.format.draggable) === 'undefined') {
                this.format.draggable = DualListComponent.DEFAULT_FORMAT.draggable;
            }
        }
        if (changeRecord['source']) {
            this.available = new BasicList(DualListComponent.AVAILABLE_LIST_NAME);
            this.updatedSource();
            this.updatedDestination();
        }
        if (changeRecord['destination']) {
            this.confirmed = new BasicList(DualListComponent.CONFIRMED_LIST_NAME);
            this.updatedDestination();
            this.updatedSource();
        }
    }
    ngDoCheck() {
        if (this.source && this.buildAvailable(this.source)) {
            this.onFilter(this.available);
        }
        if (this.destination && this.buildConfirmed(this.destination)) {
            this.onFilter(this.confirmed);
        }
    }
    buildAvailable(source) {
        const sourceChanges = this.sourceDiffer.diff(source);
        if (sourceChanges) {
            sourceChanges.forEachRemovedItem((r) => {
                const idx = this.findItemIndex(this.available.list, r.item, this.key);
                if (idx !== -1) {
                    this.available.list.splice(idx, 1);
                }
            });
            sourceChanges.forEachAddedItem((r) => {
                // Do not add duplicates even if source has duplicates.
                if (this.findItemIndex(this.available.list, r.item, this.key) === -1) {
                    this.available.list.push({ _id: this.makeId(r.item), _name: this.makeName(r.item) });
                }
            });
            if (this.compare !== undefined) {
                this.available.list.sort(this.compare);
            }
            this.available.sift = this.available.list;
            return true;
        }
        return false;
    }
    buildConfirmed(destination) {
        let moved = false;
        const destChanges = this.destinationDiffer.diff(destination);
        if (destChanges) {
            destChanges.forEachRemovedItem((r) => {
                const idx = this.findItemIndex(this.confirmed.list, r.item, this.key);
                if (idx !== -1) {
                    if (!this.isItemSelected(this.confirmed.pick, this.confirmed.list[idx])) {
                        this.selectItem(this.confirmed.pick, this.confirmed.list[idx]);
                    }
                    this.moveItem(this.confirmed, this.available, this.confirmed.list[idx], false);
                    moved = true;
                }
            });
            destChanges.forEachAddedItem((r) => {
                const idx = this.findItemIndex(this.available.list, r.item, this.key);
                if (idx !== -1) {
                    if (!this.isItemSelected(this.available.pick, this.available.list[idx])) {
                        this.selectItem(this.available.pick, this.available.list[idx]);
                    }
                    this.moveItem(this.available, this.confirmed, this.available.list[idx], false);
                    moved = true;
                }
            });
            if (this.compare !== undefined) {
                this.confirmed.list.sort(this.compare);
            }
            this.confirmed.sift = this.confirmed.list;
            if (moved) {
                this.trueUp();
            }
            return true;
        }
        return false;
    }
    updatedSource() {
        this.available.list.length = 0;
        this.available.pick.length = 0;
        if (this.source !== undefined) {
            this.sourceDiffer = this.differs.find(this.source).create(null);
        }
    }
    updatedDestination() {
        if (this.destination !== undefined) {
            this.destinationDiffer = this.differs.find(this.destination).create(null);
        }
    }
    direction() {
        return this.format.direction === DualListComponent.LTR;
    }
    dragEnd(list = null) {
        if (list) {
            list.dragStart = false;
        }
        else {
            this.available.dragStart = false;
            this.confirmed.dragStart = false;
        }
        return false;
    }
    drag(event, item, list) {
        if (!this.isItemSelected(list.pick, item)) {
            this.selectItem(list.pick, item);
        }
        list.dragStart = true;
        // Set a custom type to be this dual-list's id.
        event.dataTransfer.setData(this.id, item['_id']);
    }
    allowDrop(event, list) {
        if (event.dataTransfer.types.length && (event.dataTransfer.types[0] === this.id)) {
            event.preventDefault();
            if (!list.dragStart) {
                list.dragOver = true;
            }
        }
        return false;
    }
    dragLeave() {
        this.available.dragOver = false;
        this.confirmed.dragOver = false;
    }
    drop(event, list) {
        if (event.dataTransfer.types.length && (event.dataTransfer.types[0] === this.id)) {
            event.preventDefault();
            this.dragLeave();
            this.dragEnd();
            if (list === this.available) {
                this.moveItem(this.available, this.confirmed);
            }
            else {
                this.moveItem(this.confirmed, this.available);
            }
        }
    }
    trueUp() {
        let changed = false;
        // Clear removed items.
        let pos = this.destination.length;
        while ((pos -= 1) >= 0) {
            const mv = this.confirmed.list.filter(conf => {
                if (typeof this.destination[pos] === 'object') {
                    return conf._id === this.destination[pos][this.key];
                }
                else {
                    return conf._id === this.destination[pos];
                }
            });
            if (mv.length === 0) {
                // Not found so remove.
                this.destination.splice(pos, 1);
                changed = true;
            }
        }
        // Push added items.
        for (let i = 0, len = this.confirmed.list.length; i < len; i += 1) {
            let mv = this.destination.filter((d) => {
                if (typeof d === 'object') {
                    return (d[this.key] === this.confirmed.list[i]._id);
                }
                else {
                    return (d === this.confirmed.list[i]._id);
                }
            });
            if (mv.length === 0) {
                // Not found so add.
                mv = this.source.filter((o) => {
                    if (typeof o === 'object') {
                        return (o[this.key] === this.confirmed.list[i]._id);
                    }
                    else {
                        return (o === this.confirmed.list[i]._id);
                    }
                });
                if (mv.length > 0) {
                    this.destination.push(mv[0]);
                    changed = true;
                }
            }
        }
        if (changed) {
            this.destinationChange.emit(this.destination);
        }
    }
    findItemIndex(list, item, key = '_id') {
        let idx = -1;
        function matchObject(e) {
            if (e._id === item[key]) {
                idx = list.indexOf(e);
                return true;
            }
            return false;
        }
        function match(e) {
            if (e._id === item) {
                idx = list.indexOf(e);
                return true;
            }
            return false;
        }
        // Assumption is that the arrays do not have duplicates.
        if (typeof item === 'object') {
            list.filter(matchObject);
        }
        else {
            list.filter(match);
        }
        return idx;
    }
    makeUnavailable(source, item) {
        const idx = source.list.indexOf(item);
        if (idx !== -1) {
            source.list.splice(idx, 1);
        }
    }
    moveItem(source, target, item = null, trueup = true) {
        let i = 0;
        let len = source.pick.length;
        if (item) {
            i = source.list.indexOf(item);
            len = i + 1;
        }
        for (; i < len; i += 1) {
            // Is the pick still in list?
            let mv = [];
            if (item) {
                const idx = this.findItemIndex(source.pick, item);
                if (idx !== -1) {
                    mv[0] = source.pick[idx];
                }
            }
            else {
                mv = source.list.filter(src => {
                    return (src._id === source.pick[i]._id);
                });
            }
            // Should only ever be 1
            if (mv.length === 1) {
                // Add if not already in target.
                if (target.list.filter(trg => trg._id === mv[0]._id).length === 0) {
                    target.list.push(mv[0]);
                }
                this.makeUnavailable(source, mv[0]);
            }
        }
        if (this.compare !== undefined) {
            target.list.sort(this.compare);
        }
        source.pick.length = 0;
        // Update destination
        if (trueup) {
            this.trueUp();
        }
        // Delay ever-so-slightly to prevent race condition.
        setTimeout(() => {
            this.onFilter(source);
            this.onFilter(target);
        }, 10);
    }
    isItemSelected(list, item) {
        if (list.filter(e => Object.is(e, item)).length > 0) {
            return true;
        }
        return false;
    }
    shiftClick(event, index, source, item) {
        if (event.shiftKey && source.last && !Object.is(item, source.last)) {
            const idx = source.sift.indexOf(source.last);
            if (index > idx) {
                for (let i = (idx + 1); i < index; i += 1) {
                    this.selectItem(source.pick, source.sift[i]);
                }
            }
            else if (idx !== -1) {
                for (let i = (index + 1); i < idx; i += 1) {
                    this.selectItem(source.pick, source.sift[i]);
                }
            }
        }
        source.last = item;
    }
    selectItem(list, item) {
        const pk = list.filter((e) => {
            return Object.is(e, item);
        });
        if (pk.length > 0) {
            // Already in list, so deselect.
            for (let i = 0, len = pk.length; i < len; i += 1) {
                const idx = list.indexOf(pk[i]);
                if (idx !== -1) {
                    list.splice(idx, 1);
                }
            }
        }
        else {
            list.push(item);
        }
    }
    selectAll(source) {
        source.pick.length = 0;
        source.pick = source.sift.slice(0);
    }
    selectNone(source) {
        source.pick.length = 0;
    }
    isAllSelected(source) {
        if (source.list.length === 0 || source.list.length === source.pick.length) {
            return true;
        }
        return false;
    }
    isAnySelected(source) {
        if (source.pick.length > 0) {
            return true;
        }
        return false;
    }
    unpick(source) {
        for (let i = source.pick.length - 1; i >= 0; i -= 1) {
            if (source.sift.indexOf(source.pick[i]) === -1) {
                source.pick.splice(i, 1);
            }
        }
    }
    clearFilter(source) {
        if (source) {
            source.picker = '';
            this.onFilter(source);
        }
    }
    onFilter(source) {
        if (source.picker.length > 0) {
            try {
                const filtered = source.list.filter((item) => {
                    if (Object.prototype.toString.call(item) === '[object Object]') {
                        if (item._name !== undefined) {
                            // @ts-ignore: remove when d.ts has locale as an argument.
                            return item._name.toLocaleLowerCase(this.format.locale).indexOf(source.picker.toLocaleLowerCase(this.format.locale)) !== -1;
                        }
                        else {
                            // @ts-ignore: remove when d.ts has locale as an argument.
                            return JSON.stringify(item).toLocaleLowerCase(this.format.locale).indexOf(source.picker.toLocaleLowerCase(this.format.locale)) !== -1;
                        }
                    }
                    else {
                        // @ts-ignore: remove when d.ts has locale as an argument.
                        return item.toLocaleLowerCase(this.format.locale).indexOf(source.picker.toLocaleLowerCase(this.format.locale)) !== -1;
                    }
                });
                source.sift = filtered;
                this.unpick(source);
            }
            catch (e) {
                if (e instanceof RangeError) {
                    this.format.locale = undefined;
                }
                source.sift = source.list;
            }
        }
        else {
            source.sift = source.list;
        }
    }
    makeId(item) {
        if (typeof item === 'object') {
            return item[this.key];
        }
        else {
            return item;
        }
    }
    // Allow for complex names by passing an array of strings.
    // Example: [display]="[ '_type.substring(0,1)', '_name' ]"
    makeName(item, separator = '_') {
        const display = this.display;
        function fallback(itm) {
            switch (Object.prototype.toString.call(itm)) {
                case '[object Number]':
                    return itm;
                case '[object String]':
                    return itm;
                default:
                    if (itm !== undefined) {
                        return itm[display];
                    }
                    else {
                        return 'undefined';
                    }
            }
        }
        let str = '';
        if (this.display !== undefined) {
            switch (Object.prototype.toString.call(this.display)) {
                case '[object Function]':
                    str = this.display(item);
                    break;
                case '[object Array]':
                    for (let i = 0, len = this.display.length; i < len; i += 1) {
                        if (str.length > 0) {
                            str = str + separator;
                        }
                        if (this.display[i].indexOf('.') === -1) {
                            // Simple, just add to string.
                            str = str + item[this.display[i]];
                        }
                        else {
                            // Complex, some action needs to be performed
                            const parts = this.display[i].split('.');
                            const s = item[parts[0]];
                            if (s) {
                                // Use brute force
                                if (parts[1].indexOf('substring') !== -1) {
                                    const nums = (parts[1].substring(parts[1].indexOf('(') + 1, parts[1].indexOf(')'))).split(',');
                                    switch (nums.length) {
                                        case 1:
                                            str = str + s.substring(parseInt(nums[0], 10));
                                            break;
                                        case 2:
                                            str = str + s.substring(parseInt(nums[0], 10), parseInt(nums[1], 10));
                                            break;
                                        default:
                                            str = str + s;
                                            break;
                                    }
                                }
                                else {
                                    // method not approved, so just add s.
                                    str = str + s;
                                }
                            }
                        }
                    }
                    break;
                default:
                    str = fallback(item);
                    break;
            }
        }
        else {
            str = fallback(item);
        }
        return str;
    }
}
DualListComponent.ɵfac = function DualListComponent_Factory(t) { return new (t || DualListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers)); };
DualListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: DualListComponent, selectors: [["dual-list"]], inputs: { id: "id", key: "key", display: "display", height: "height", filter: "filter", format: "format", sort: "sort", disabled: "disabled", compare: "compare", source: "source", destination: "destination" }, outputs: { destinationChange: "destinationChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 25, vars: 40, consts: [[1, "dual-list"], [1, "listbox", 3, "ngStyle"], ["type", "button", "name", "addBtn", 1, "btn", "btn-primary", "btn-block", 3, "ngClass", "disabled", "click"], ["class", "filter", 4, "ngIf"], [1, "record-picker"], [3, "ngStyle", "ngClass", "drop", "dragover", "dragleave"], [3, "ngClass", "draggable", "click", "dragstart", "dragend", 4, "ngFor", "ngForOf"], [1, "button-bar"], ["type", "button", 1, "btn", "btn-primary", "pull-left", 3, "disabled", "click"], ["type", "button", 1, "btn", "btn-default", "pull-right", 3, "disabled", "click"], ["type", "button", "name", "removeBtn", 1, "btn", "btn-primary", "btn-block", 3, "ngClass", "disabled", "click"], [1, "filter"], ["name", "filterSource", 1, "form-control", 3, "ngModel", "ngModelChange"], [3, "ngClass", "draggable", "click", "dragstart", "dragend"], ["name", "filterDestination", 1, "form-control", 3, "ngModel", "ngModelChange"], ["itmConf", ""]], template: function DualListComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "button", 2);
        ɵngcc0.ɵɵlistener("click", function DualListComponent_Template_button_click_2_listener() { return ctx.moveItem(ctx.available, ctx.confirmed); });
        ɵngcc0.ɵɵtext(3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(4, DualListComponent_form_4_Template, 2, 1, "form", 3);
        ɵngcc0.ɵɵelementStart(5, "div", 4);
        ɵngcc0.ɵɵelementStart(6, "ul", 5);
        ɵngcc0.ɵɵlistener("drop", function DualListComponent_Template_ul_drop_6_listener($event) { return ctx.drop($event, ctx.confirmed); })("dragover", function DualListComponent_Template_ul_dragover_6_listener($event) { return ctx.allowDrop($event, ctx.available); })("dragleave", function DualListComponent_Template_ul_dragleave_6_listener() { return ctx.dragLeave(); });
        ɵngcc0.ɵɵtemplate(7, DualListComponent_li_7_Template, 3, 6, "li", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(8, "div", 7);
        ɵngcc0.ɵɵelementStart(9, "button", 8);
        ɵngcc0.ɵɵlistener("click", function DualListComponent_Template_button_click_9_listener() { return ctx.selectAll(ctx.available); });
        ɵngcc0.ɵɵtext(10);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(11, "button", 9);
        ɵngcc0.ɵɵlistener("click", function DualListComponent_Template_button_click_11_listener() { return ctx.selectNone(ctx.available); });
        ɵngcc0.ɵɵtext(12);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(13, "div", 1);
        ɵngcc0.ɵɵelementStart(14, "button", 10);
        ɵngcc0.ɵɵlistener("click", function DualListComponent_Template_button_click_14_listener() { return ctx.moveItem(ctx.confirmed, ctx.available); });
        ɵngcc0.ɵɵtext(15);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(16, DualListComponent_form_16_Template, 2, 1, "form", 3);
        ɵngcc0.ɵɵelementStart(17, "div", 4);
        ɵngcc0.ɵɵelementStart(18, "ul", 5);
        ɵngcc0.ɵɵlistener("drop", function DualListComponent_Template_ul_drop_18_listener($event) { return ctx.drop($event, ctx.available); })("dragover", function DualListComponent_Template_ul_dragover_18_listener($event) { return ctx.allowDrop($event, ctx.confirmed); })("dragleave", function DualListComponent_Template_ul_dragleave_18_listener() { return ctx.dragLeave(); });
        ɵngcc0.ɵɵtemplate(19, DualListComponent_li_19_Template, 4, 6, "li", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(20, "div", 7);
        ɵngcc0.ɵɵelementStart(21, "button", 8);
        ɵngcc0.ɵɵlistener("click", function DualListComponent_Template_button_click_21_listener() { return ctx.selectAll(ctx.confirmed); });
        ɵngcc0.ɵɵtext(22);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(23, "button", 9);
        ɵngcc0.ɵɵlistener("click", function DualListComponent_Template_button_click_23_listener() { return ctx.selectNone(ctx.confirmed); });
        ɵngcc0.ɵɵtext(24);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction2(24, _c1, ctx.direction() ? 1 : 2, ctx.direction() ? 0 : "10px"));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngClass", ctx.direction() ? "point-right" : "point-left")("disabled", ctx.available.pick.length === 0);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.format.add);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.filter);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction2(27, _c2, ctx.height, ctx.height))("ngClass", ɵngcc0.ɵɵpureFunction1(30, _c3, ctx.available.dragOver));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.available.sift);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled || ctx.isAllSelected(ctx.available));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.format.all);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", !ctx.isAnySelected(ctx.available));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.format.none);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction2(32, _c1, ctx.direction() ? 2 : 1, ctx.direction() ? "10px" : 0));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngClass", ctx.direction() ? "point-left" : "point-right")("disabled", ctx.confirmed.pick.length === 0);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.format.remove);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.filter);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction2(35, _c2, ctx.height, ctx.height))("ngClass", ɵngcc0.ɵɵpureFunction1(38, _c3, ctx.confirmed.dragOver));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.confirmed.sift);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled || ctx.isAllSelected(ctx.confirmed));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.format.all);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", !ctx.isAnySelected(ctx.confirmed));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate(ctx.format.none);
    } }, directives: [ɵngcc1.NgStyle, ɵngcc1.NgClass, ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc2.ɵangular_packages_forms_forms_y, ɵngcc2.NgControlStatusGroup, ɵngcc2.NgForm, ɵngcc2.DefaultValueAccessor, ɵngcc2.NgControlStatus, ɵngcc2.NgModel], styles: ["div.record-picker[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;cursor:pointer;overflow-x:hidden;overflow-y:auto;position:relative}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-button{height:0;width:0}div.record-picker[_ngcontent-%COMP%]{scrollbar-3dlight-color:#337ab7;scrollbar-arrow-color:grey;scrollbar-base-color:#337ab7;scrollbar-dark-shadow-color:grey;scrollbar-highlight-color:#337ab7;scrollbar-shadow-color:grey;scrollbar-track-color:#eee}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#eee;border-bottom-right-radius:8px;border-top-right-radius:8px;box-shadow:inset 0 0 3px #dfdfdf}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#337ab7;border:thin solid grey;border-bottom-right-radius:8px;border-top-right-radius:8px}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#286090}.record-picker[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0 0 1px}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;border-top:thin solid #ddd;cursor:pointer;display:block;font-size:.85em;margin-bottom:-1px;min-height:16px;padding:2px 2px 2px 10px;white-space:nowrap}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.record-picker[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#d9edf7}.record-picker[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background-color:#c4e3f3}.record-picker[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{background-color:inherit;cursor:default;opacity:.5}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:none;border-top-left-radius:8px;border-top-right-radius:8px}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none;border-bottom-left-radius:8px;border-bottom-right-radius:8px}.record-picker[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;cursor:pointer;font-size:14px;font-weight:inherit;margin-bottom:-1px;padding:4px;user-select:none}.record-picker[_ngcontent-%COMP%]   ul.over[_ngcontent-%COMP%]{background-color:#d3d3d3}.dual-list[_ngcontent-%COMP%]{align-content:flex-start;display:flex;flex-direction:row}.dual-list[_ngcontent-%COMP%]   .listbox[_ngcontent-%COMP%]{margin:0;width:50%}.dual-list[_ngcontent-%COMP%]   .button-bar[_ngcontent-%COMP%]{margin-top:8px}.point-right[_ngcontent-%COMP%]:after{content:\"\\25B6\";padding-left:1em}.point-left[_ngcontent-%COMP%]:before{content:\"\\25C0\";padding-right:1em}.dual-list[_ngcontent-%COMP%]   .button-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:47%}button.btn-block[_ngcontent-%COMP%]{display:block;margin-bottom:8px;width:100%}.filter[_ngcontent-%COMP%]{margin-bottom:-2.2em}.filter[_ngcontent-%COMP%]:after{background-image:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M0 64l192 192v192l128-32V256L512 64H0z\"/></svg>');background-position:50%;background-repeat:no-repeat;color:transparent;content:\"o\";font-size:2em;left:calc(100% - 21px);opacity:.2;position:relative;top:-36px;width:40px}"] });
DualListComponent.AVAILABLE_LIST_NAME = 'available';
DualListComponent.CONFIRMED_LIST_NAME = 'confirmed';
DualListComponent.LTR = 'left-to-right';
DualListComponent.RTL = 'right-to-left';
DualListComponent.DEFAULT_FORMAT = {
    add: 'Add',
    remove: 'Remove',
    all: 'All',
    none: 'None',
    direction: DualListComponent.LTR,
    draggable: true,
    locale: undefined
};
DualListComponent.ctorParameters = () => [
    { type: IterableDiffers }
];
DualListComponent.propDecorators = {
    id: [{ type: Input }],
    key: [{ type: Input }],
    display: [{ type: Input }],
    height: [{ type: Input }],
    filter: [{ type: Input }],
    format: [{ type: Input }],
    sort: [{ type: Input }],
    compare: [{ type: Input }],
    disabled: [{ type: Input }],
    source: [{ type: Input }],
    destination: [{ type: Input }],
    destinationChange: [{ type: Output }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DualListComponent, [{
        type: Component,
        args: [{
                selector: 'dual-list',
                template: "<div class=\"dual-list\">\n\t<div class=\"listbox\" [ngStyle]=\"{ 'order' :  direction() ? 1 : 2, 'margin-left' : direction() ? 0 : '10px' }\">\n\t\t<button type=\"button\" name=\"addBtn\" class=\"btn btn-primary btn-block\"\n\t\t\t(click)=\"moveItem(available, confirmed)\" [ngClass]=\"direction() ? 'point-right' : 'point-left'\"\n\t\t\t[disabled]=\"available.pick.length === 0\">{{format.add}}</button>\n\n\t\t<form *ngIf=\"filter\" class=\"filter\">\n\t\t\t<input class=\"form-control\" name=\"filterSource\" [(ngModel)]=\"available.picker\" (ngModelChange)=\"onFilter(available)\">\n\t\t</form>\n\n\t\t<div class=\"record-picker\">\n\t\t\t<ul [ngStyle]=\"{'max-height': height, 'min-height': height}\" [ngClass]=\"{over:available.dragOver}\"\n\t\t\t\t(drop)=\"drop($event, confirmed)\" (dragover)=\"allowDrop($event, available)\" (dragleave)=\"dragLeave()\">\n\t\t\t\t<li *ngFor=\"let item of available.sift; let idx=index;\"\n\t\t\t\t\t(click)=\"disabled ? null : selectItem(available.pick, item); shiftClick($event, idx, available, item)\"\n\t\t\t\t\t[ngClass]=\"{selected: isItemSelected(available.pick, item), disabled: disabled}\"\n\t\t\t\t\t[draggable]=\"!disabled && format.draggable\" (dragstart)=\"drag($event, item, available)\" (dragend)=\"dragEnd(available)\"\n\t\t\t\t><label>{{item._name}}</label></li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class=\"button-bar\">\n\t\t\t<button type=\"button\" class=\"btn btn-primary pull-left\" (click)=\"selectAll(available)\"\n\t\t\t\t[disabled]=\"disabled || isAllSelected(available)\">{{format.all}}</button>\n\t\t\t<button type=\"button\" class=\"btn btn-default pull-right\" (click)=\"selectNone(available)\"\n\t\t\t\t[disabled]=\"!isAnySelected(available)\">{{format.none}}</button>\n\t\t</div>\n\t</div>\n\n\t<div class=\"listbox\" [ngStyle]=\"{ 'order' : direction() ? 2 : 1, 'margin-left' : direction() ? '10px' : 0 }\">\n\t\t<button type=\"button\" name=\"removeBtn\" class=\"btn btn-primary btn-block\"\n\t\t\t(click)=\"moveItem(confirmed, available)\" [ngClass]=\"direction() ? 'point-left' : 'point-right'\"\n\t\t\t[disabled]=\"confirmed.pick.length === 0\">{{format.remove}}</button>\n\n\t\t<form *ngIf=\"filter\" class=\"filter\">\n\t\t\t<input class=\"form-control\" name=\"filterDestination\" [(ngModel)]=\"confirmed.picker\" (ngModelChange)=\"onFilter(confirmed)\">\n\t\t</form>\n\n\t\t<div class=\"record-picker\">\n\t\t\t<ul [ngStyle]=\"{'max-height': height, 'min-height': height}\" [ngClass]=\"{over:confirmed.dragOver}\"\n\t\t\t\t(drop)=\"drop($event, available)\" (dragover)=\"allowDrop($event, confirmed)\" (dragleave)=\"dragLeave()\">\n\t\t\t\t<li #itmConf *ngFor=\"let item of confirmed.sift; let idx=index;\"\n\t\t\t\t\t(click)=\"disabled ? null : selectItem(confirmed.pick, item); shiftClick($event, idx, confirmed, item)\"\n\t\t\t\t\t[ngClass]=\"{selected: isItemSelected(confirmed.pick, item), disabled: disabled}\"\n\t\t\t\t\t[draggable]=\"!disabled && format.draggable\" (dragstart)=\"drag($event, item, confirmed)\" (dragend)=\"dragEnd(confirmed)\"\n\t\t\t\t><label>{{item._name}}</label></li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class=\"button-bar\">\n\t\t\t<button type=\"button\" class=\"btn btn-primary pull-left\" (click)=\"selectAll(confirmed)\"\n\t\t\t\t[disabled]=\"disabled || isAllSelected(confirmed)\">{{format.all}}</button>\n\t\t\t<button type=\"button\" class=\"btn btn-default pull-right\" (click)=\"selectNone(confirmed)\"\n\t\t\t\t[disabled]=\"!isAnySelected(confirmed)\">{{format.none}}</button>\n\t\t</div>\n\t</div>\n</div>\n",
                styles: ["div.record-picker{border:1px solid #ddd;border-radius:8px;cursor:pointer;overflow-x:hidden;overflow-y:auto;position:relative}div.record-picker::-webkit-scrollbar{width:12px}div.record-picker::-webkit-scrollbar-button{height:0;width:0}div.record-picker{scrollbar-3dlight-color:#337ab7;scrollbar-arrow-color:grey;scrollbar-base-color:#337ab7;scrollbar-dark-shadow-color:grey;scrollbar-highlight-color:#337ab7;scrollbar-shadow-color:grey;scrollbar-track-color:#eee}div.record-picker::-webkit-scrollbar-track{background:#eee;border-bottom-right-radius:8px;border-top-right-radius:8px;box-shadow:inset 0 0 3px #dfdfdf}div.record-picker::-webkit-scrollbar-thumb{background:#337ab7;border:thin solid grey;border-bottom-right-radius:8px;border-top-right-radius:8px}div.record-picker::-webkit-scrollbar-thumb:hover{background:#286090}.record-picker ul{margin:0;padding:0 0 1px}.record-picker li{border-bottom:1px solid #ddd;border-top:thin solid #ddd;cursor:pointer;display:block;font-size:.85em;margin-bottom:-1px;min-height:16px;padding:2px 2px 2px 10px;white-space:nowrap}.record-picker li:hover{background-color:#f5f5f5}.record-picker li.selected{background-color:#d9edf7}.record-picker li.selected:hover{background-color:#c4e3f3}.record-picker li.disabled{background-color:inherit;cursor:default;opacity:.5}.record-picker li:first-child{border-top:none;border-top-left-radius:8px;border-top-right-radius:8px}.record-picker li:last-child{border-bottom:none;border-bottom-left-radius:8px;border-bottom-right-radius:8px}.record-picker label{-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;cursor:pointer;font-size:14px;font-weight:inherit;margin-bottom:-1px;padding:4px;user-select:none}.record-picker ul.over{background-color:#d3d3d3}.dual-list{align-content:flex-start;display:flex;flex-direction:row}.dual-list .listbox{margin:0;width:50%}.dual-list .button-bar{margin-top:8px}.point-right:after{content:\"\\25B6\";padding-left:1em}.point-left:before{content:\"\\25C0\";padding-right:1em}.dual-list .button-bar button{width:47%}button.btn-block{display:block;margin-bottom:8px;width:100%}.filter{margin-bottom:-2.2em}.filter:after{background-image:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M0 64l192 192v192l128-32V256L512 64H0z\"/></svg>');background-position:50%;background-repeat:no-repeat;color:transparent;content:\"o\";font-size:2em;left:calc(100% - 21px);opacity:.2;position:relative;top:-36px;width:40px}"]
            }]
    }], function () { return [{ type: ɵngcc0.IterableDiffers }]; }, { id: [{
            type: Input
        }], key: [{
            type: Input
        }], display: [{
            type: Input
        }], height: [{
            type: Input
        }], filter: [{
            type: Input
        }], format: [{
            type: Input
        }], sort: [{
            type: Input
        }], disabled: [{
            type: Input
        }], destinationChange: [{
            type: Output
        }], compare: [{
            type: Input
        }], source: [{
            type: Input
        }], destination: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHVhbC1saXN0LmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvYW5ndWxhci1kdWFsLWxpc3Rib3gvc3JjL2xpYi9kdWFsLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVcsWUFBWSxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQ2hFLE1BQU0sRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFFN0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGNBQWMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSXpDLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztBQVFmLE1BQU0sT0FBTyxpQkFBaUI7QUFBRyxJQXNDaEMsWUFBb0IsT0FBd0I7QUFDN0MsUUFEcUIsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7QUFBQyxRQXJCcEMsT0FBRSxHQUFHLGFBQWEsTUFBTSxFQUFFLEVBQUUsQ0FBQztBQUN2QyxRQUFVLFFBQUcsR0FBRyxLQUFLLENBQUM7QUFDdEIsUUFBVSxZQUFPLEdBQVEsT0FBTyxDQUFDO0FBQ2pDLFFBQVUsV0FBTSxHQUFHLE9BQU8sQ0FBQztBQUMzQixRQUFVLFdBQU0sR0FBRyxLQUFLLENBQUM7QUFDekIsUUFBVSxXQUFNLEdBQUcsaUJBQWlCLENBQUMsY0FBYyxDQUFDO0FBQ3BELFFBQVUsU0FBSSxHQUFHLEtBQUssQ0FBQztBQUN2QixRQUNVLGFBQVEsR0FBRyxLQUFLLENBQUM7QUFDM0IsUUFFVyxzQkFBaUIsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0FBQ2xELFFBT1MsV0FBTSxHQUFHLENBQUMsQ0FBTSxFQUFFLENBQU0sRUFBRSxFQUFFLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMs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RyxHQUFHLGVBQWUsQ0FBQztBQUV0QixnQ0FBYyxHQUFHO0FBQ3pCLElBQUUsR0FBRyxFQUFFLEtBQUs7QUFDWixJQUFFLE1BQU0sRUFBRSxRQUFRO0FBQ2xCLElBQUUsR0FBRyxFQUFFLEtBQUs7QUFDWixJQUFFLElBQUksRUFBRSxNQUFNO0FBQ2QsSUFBRSxTQUFTLEVBQUUsaUJBQWlCLENBQUMsR0FBRztBQUNsQyxJQUFFLFNBQVMsRUFBRSxJQUFJO0FBQ2pCLElBQUUsTUFBTSxFQUFFLFNBQVM7QUFDbkIsQ0FBRSxDQUFDLEFBZkM7QUFBQztFQU5KLFNBQVMsU0FBQyxwQkFNcUMsWUFmRSxlQUFlO0FBQUc7S0FVbkUsUUFBUSxFQUFFLFdBQVcsMUJBVmlEO09BV3RFLFBBVjZCLGlCQStCNUIsS0FBSztBQUFLLGtCQUNWLEtBQUs7QUFBSyxzQkFDVixLQUFLO0FBQUsscUJBQ1YsS0FBSztBQUFLLHFCQUNWLEtBQUs7QUFBSyxxQkFDVixLQUFLO0FBQUssbUJBQ1YsS0FBSztBQUFLLHNCQUNWLEtBQUs7QUFBSyx1QkFDVixLQUFLO0FBQUsscUJBQ1YsS0FBSztBQUFLLDBCQUNWLEtBQUs7QUFBSyxnQ0FDVixNQUFNO0FBQUk7Ozs7O2s4RkFoQzhCO3c5REFFekM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQThCYTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBEb0NoZWNrLCBFdmVudEVtaXR0ZXIsIElucHV0LCBJdGVyYWJsZURpZmZlcnMsIE9uQ2hhbmdlcyxcblx0T3V0cHV0LCBTaW1wbGVDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgQmFzaWNMaXN0IH0gZnJvbSAnLi9iYXNpYy1saXN0JztcblxuZXhwb3J0IHR5cGUgY29tcGFyZUZ1bmN0aW9uID0gKGE6IGFueSwgYjogYW55KSA9PiBudW1iZXI7XG5cbnZhciBuZXh0SWQgPSAwO1xuXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6ICdkdWFsLWxpc3QnLFxuXHR0ZW1wbGF0ZVVybDogJy4vZHVhbC1saXN0LmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbICcuL2R1YWwtbGlzdC5jb21wb25lbnQuY3NzJyBdXG59KVxuXG5leHBvcnQgY2xhc3MgRHVhbExpc3RDb21wb25lbnQgaW1wbGVtZW50cyBEb0NoZWNrLCBPbkNoYW5nZXMge1xuXHRzdGF0aWMgQVZBSUxBQkxFX0xJU1RfTkFNRSA9ICdhdmFpbGFibGUnO1xuXHRzdGF0aWMgQ09ORklSTUVEX0xJU1RfTkFNRSA9ICdjb25maXJtZWQnO1xuXG5cdHN0YXRpYyBMVFIgPSAnbGVmdC10by1yaWdodCc7XG5cdHN0YXRpYyBSVEwgPSAncmlnaHQtdG8tbGVmdCc7XG5cblx0c3RhdGljIERFRkFVTFRfRk9STUFUID0ge1xuXHRcdGFkZDogJ0FkZCcsXG5cdFx0cmVtb3ZlOiAnUmVtb3ZlJyxcblx0XHRhbGw6ICdBbGwnLFxuXHRcdG5vbmU6ICdOb25lJyxcblx0XHRkaXJlY3Rpb246IER1YWxMaXN0Q29tcG9uZW50LkxUUixcblx0XHRkcmFnZ2FibGU6IHRydWUsXG5cdFx0bG9jYWxlOiB1bmRlZmluZWRcblx0fTtcblxuXHRASW5wdXQoKSBpZCA9IGBkdWFsLWxpc3QtJHtuZXh0SWQrK31gO1xuXHRASW5wdXQoKSBrZXkgPSAnX2lkJztcblx0QElucHV0KCkgZGlzcGxheTogYW55ID0gJ19uYW1lJztcblx0QElucHV0KCkgaGVpZ2h0ID0gJzEwMHB4Jztcblx0QElucHV0KCkgZmlsdGVyID0gZmFsc2U7XG5cdEBJbnB1dCgpIGZvcm1hdCA9IER1YWxMaXN0Q29tcG9uZW50LkRFRkFVTFRfRk9STUFUO1xuXHRASW5wdXQoKSBzb3J0ID0gZmFsc2U7XG5cdEBJbnB1dCgpIGNvbXBhcmU6IGNvbXBhcmVGdW5jdGlvbjtcblx0QElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcblx0QElucHV0KCkgc291cmNlOiBBcnJheTxhbnk+O1xuXHRASW5wdXQoKSBkZXN0aW5hdGlvbjogQXJyYXk8YW55Pjtcblx0QE91dHB1dCgpIGRlc3RpbmF0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG5cdGF2YWlsYWJsZTogQmFzaWNMaXN0O1xuXHRjb25maXJtZWQ6IEJhc2ljTGlzdDtcblxuXHRzb3VyY2VEaWZmZXI6IGFueTtcblx0ZGVzdGluYXRpb25EaWZmZXI6IGFueTtcblxuXHRwcml2YXRlIHNvcnRlciA9IChhOiBhbnksIGI6IGFueSkgPT4geyByZXR1cm4gKGEuX25hbWUgPCBiLl9uYW1lKSA/IC0xIDogKChhLl9uYW1lID4gYi5fbmFtZSkgPyAxIDogMCk7IH07XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBkaWZmZXJzOiBJdGVyYWJsZURpZmZlcnMpIHtcblx0XHR0aGlzLmF2YWlsYWJsZSA9IG5ldyBCYXNpY0xpc3QoRHVhbExpc3RDb21wb25lbnQuQVZBSUxBQkxFX0xJU1RfTkFNRSk7XG5cdFx0dGhpcy5jb25maXJtZWQgPSBuZXcgQmFzaWNMaXN0KER1YWxMaXN0Q29tcG9uZW50LkNPTkZJUk1FRF9MSVNUX05BTUUpO1xuXHR9XG5cblx0bmdPbkNoYW5nZXMoY2hhbmdlUmVjb3JkOiB7W2tleTogc3RyaW5nXTogU2ltcGxlQ2hhbmdlfSkge1xuXHRcdGlmIChjaGFuZ2VSZWNvcmRbJ2ZpbHRlciddKSB7XG5cdFx0XHRpZiAoY2hhbmdlUmVjb3JkWydmaWx0ZXInXS5jdXJyZW50VmFsdWUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdHRoaXMuY2xlYXJGaWx0ZXIodGhpcy5hdmFpbGFibGUpO1xuXHRcdFx0XHR0aGlzLmNsZWFyRmlsdGVyKHRoaXMuY29uZmlybWVkKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoY2hhbmdlUmVjb3JkWydzb3J0J10pIHtcblx0XHRcdGlmIChjaGFuZ2VSZWNvcmRbJ3NvcnQnXS5jdXJyZW50VmFsdWUgPT09IHRydWUgJiYgdGhpcy5jb21wYXJlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dGhpcy5jb21wYXJlID0gdGhpcy5zb3J0ZXI7XG5cdFx0XHR9IGVsc2UgaWYgKGNoYW5nZVJlY29yZFsnc29ydCddLmN1cnJlbnRWYWx1ZSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0dGhpcy5jb21wYXJlID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChjaGFuZ2VSZWNvcmRbJ2Zvcm1hdCddKSB7XG5cdFx0XHR0aGlzLmZvcm1hdCA9IGNoYW5nZVJlY29yZFsnZm9ybWF0J10uY3VycmVudFZhbHVlO1xuXG5cdFx0XHRpZiAodHlwZW9mKHRoaXMuZm9ybWF0LmRpcmVjdGlvbikgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHRoaXMuZm9ybWF0LmRpcmVjdGlvbiA9IER1YWxMaXN0Q29tcG9uZW50LkxUUjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZih0aGlzLmZvcm1hdC5hZGQpID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHR0aGlzLmZvcm1hdC5hZGQgPSBEdWFsTGlzdENvbXBvbmVudC5ERUZBVUxUX0ZPUk1BVC5hZGQ7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0eXBlb2YodGhpcy5mb3JtYXQucmVtb3ZlKSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0dGhpcy5mb3JtYXQucmVtb3ZlID0gRHVhbExpc3RDb21wb25lbnQuREVGQVVMVF9GT1JNQVQucmVtb3ZlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodHlwZW9mKHRoaXMuZm9ybWF0LmFsbCkgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHRoaXMuZm9ybWF0LmFsbCA9IER1YWxMaXN0Q29tcG9uZW50LkRFRkFVTFRfRk9STUFULmFsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZih0aGlzLmZvcm1hdC5ub25lKSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0dGhpcy5mb3JtYXQubm9uZSA9IER1YWxMaXN0Q29tcG9uZW50LkRFRkFVTFRfRk9STUFULm5vbmU7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0eXBlb2YodGhpcy5mb3JtYXQuZHJhZ2dhYmxlKSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0dGhpcy5mb3JtYXQuZHJhZ2dhYmxlID0gRHVhbExpc3RDb21wb25lbnQuREVGQVVMVF9GT1JNQVQuZHJhZ2dhYmxlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChjaGFuZ2VSZWNvcmRbJ3NvdXJjZSddKSB7XG5cdFx0XHR0aGlzLmF2YWlsYWJsZSA9IG5ldyBCYXNpY0xpc3QoRHVhbExpc3RDb21wb25lbnQuQVZBSUxBQkxFX0xJU1RfTkFNRSk7XG5cdFx0XHR0aGlzLnVwZGF0ZWRTb3VyY2UoKTtcblx0XHRcdHRoaXMudXBkYXRlZERlc3RpbmF0aW9uKCk7XG5cdFx0fVxuXG5cdFx0aWYgKGNoYW5nZVJlY29yZFsnZGVzdGluYXRpb24nXSkge1xuXHRcdFx0dGhpcy5jb25maXJtZWQgPSBuZXcgQmFzaWNMaXN0KER1YWxMaXN0Q29tcG9uZW50LkNPTkZJUk1FRF9MSVNUX05BTUUpO1xuXHRcdFx0dGhpcy51cGRhdGVkRGVzdGluYXRpb24oKTtcblx0XHRcdHRoaXMudXBkYXRlZFNvdXJjZSgpO1xuXHRcdH1cblx0fVxuXG5cdG5nRG9DaGVjaygpIHtcblx0XHRpZiAodGhpcy5zb3VyY2UgJiYgdGhpcy5idWlsZEF2YWlsYWJsZSh0aGlzLnNvdXJjZSkpIHtcblx0XHRcdHRoaXMub25GaWx0ZXIodGhpcy5hdmFpbGFibGUpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5kZXN0aW5hdGlvbiAmJiB0aGlzLmJ1aWxkQ29uZmlybWVkKHRoaXMuZGVzdGluYXRpb24pKSB7XG5cdFx0XHR0aGlzLm9uRmlsdGVyKHRoaXMuY29uZmlybWVkKTtcblx0XHR9XG5cdH1cblxuXHRidWlsZEF2YWlsYWJsZShzb3VyY2U6IEFycmF5PGFueT4pOiBib29sZWFuIHtcblx0XHRjb25zdCBzb3VyY2VDaGFuZ2VzID0gdGhpcy5zb3VyY2VEaWZmZXIuZGlmZihzb3VyY2UpO1xuXHRcdGlmIChzb3VyY2VDaGFuZ2VzKSB7XG5cdFx0XHRzb3VyY2VDaGFuZ2VzLmZvckVhY2hSZW1vdmVkSXRlbSgocjogYW55KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlkeCA9IHRoaXMuZmluZEl0ZW1JbmRleCh0aGlzLmF2YWlsYWJsZS5saXN0LCByLml0ZW0sIHRoaXMua2V5KTtcblx0XHRcdFx0aWYgKGlkeCAhPT0gLTEpIHtcblx0XHRcdFx0XHR0aGlzLmF2YWlsYWJsZS5saXN0LnNwbGljZShpZHgsIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0c291cmNlQ2hhbmdlcy5mb3JFYWNoQWRkZWRJdGVtKChyOiBhbnkpID0+IHtcblx0XHRcdFx0Ly8gRG8gbm90IGFkZCBkdXBsaWNhdGVzIGV2ZW4gaWYgc291cmNlIGhhcyBkdXBsaWNhdGVzLlxuXHRcdFx0XHRpZiAodGhpcy5maW5kSXRlbUluZGV4KHRoaXMuYXZhaWxhYmxlLmxpc3QsIHIuaXRlbSwgdGhpcy5rZXkpID09PSAtMSkge1xuXHRcdFx0XHRcdHRoaXMuYXZhaWxhYmxlLmxpc3QucHVzaCggeyBfaWQ6IHRoaXMubWFrZUlkKHIuaXRlbSksIF9uYW1lOiB0aGlzLm1ha2VOYW1lKHIuaXRlbSkgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAodGhpcy5jb21wYXJlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dGhpcy5hdmFpbGFibGUubGlzdC5zb3J0KHRoaXMuY29tcGFyZSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmF2YWlsYWJsZS5zaWZ0ID0gdGhpcy5hdmFpbGFibGUubGlzdDtcblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGJ1aWxkQ29uZmlybWVkKGRlc3RpbmF0aW9uOiBBcnJheTxhbnk+KTogYm9vbGVhbiB7XG5cdFx0bGV0IG1vdmVkID0gZmFsc2U7XG5cdFx0Y29uc3QgZGVzdENoYW5nZXMgPSB0aGlzLmRlc3RpbmF0aW9uRGlmZmVyLmRpZmYoZGVzdGluYXRpb24pO1xuXHRcdGlmIChkZXN0Q2hhbmdlcykge1xuXHRcdFx0ZGVzdENoYW5nZXMuZm9yRWFjaFJlbW92ZWRJdGVtKChyOiBhbnkpID0+IHtcblx0XHRcdFx0Y29uc3QgaWR4ID0gdGhpcy5maW5kSXRlbUluZGV4KHRoaXMuY29uZmlybWVkLmxpc3QsIHIuaXRlbSwgdGhpcy5rZXkpO1xuXHRcdFx0XHRpZiAoaWR4ICE9PSAtMSkge1xuXHRcdFx0XHRcdGlmICghdGhpcy5pc0l0ZW1TZWxlY3RlZCh0aGlzLmNvbmZpcm1lZC5waWNrLCB0aGlzLmNvbmZpcm1lZC5saXN0W2lkeF0pKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdEl0ZW0odGhpcy5jb25maXJtZWQucGljaywgdGhpcy5jb25maXJtZWQubGlzdFtpZHhdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5tb3ZlSXRlbSh0aGlzLmNvbmZpcm1lZCwgdGhpcy5hdmFpbGFibGUsIHRoaXMuY29uZmlybWVkLmxpc3RbaWR4XSwgZmFsc2UpO1xuXHRcdFx0XHRcdG1vdmVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGRlc3RDaGFuZ2VzLmZvckVhY2hBZGRlZEl0ZW0oKHI6IGFueSkgPT4ge1xuXHRcdFx0XHRjb25zdCBpZHggPSB0aGlzLmZpbmRJdGVtSW5kZXgodGhpcy5hdmFpbGFibGUubGlzdCwgci5pdGVtLCB0aGlzLmtleSk7XG5cdFx0XHRcdGlmIChpZHggIT09IC0xKSB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLmlzSXRlbVNlbGVjdGVkKHRoaXMuYXZhaWxhYmxlLnBpY2ssIHRoaXMuYXZhaWxhYmxlLmxpc3RbaWR4XSkpIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0SXRlbSh0aGlzLmF2YWlsYWJsZS5waWNrLCB0aGlzLmF2YWlsYWJsZS5saXN0W2lkeF0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLm1vdmVJdGVtKHRoaXMuYXZhaWxhYmxlLCB0aGlzLmNvbmZpcm1lZCwgdGhpcy5hdmFpbGFibGUubGlzdFtpZHhdLCBmYWxzZSk7XG5cdFx0XHRcdFx0bW92ZWQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKHRoaXMuY29tcGFyZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHRoaXMuY29uZmlybWVkLmxpc3Quc29ydCh0aGlzLmNvbXBhcmUpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jb25maXJtZWQuc2lmdCA9IHRoaXMuY29uZmlybWVkLmxpc3Q7XG5cblx0XHRcdGlmIChtb3ZlZCkge1xuXHRcdFx0XHR0aGlzLnRydWVVcCgpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHVwZGF0ZWRTb3VyY2UoKSB7XG5cdFx0dGhpcy5hdmFpbGFibGUubGlzdC5sZW5ndGggPSAwO1xuXHRcdHRoaXMuYXZhaWxhYmxlLnBpY2subGVuZ3RoID0gMDtcblxuXHRcdGlmICh0aGlzLnNvdXJjZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLnNvdXJjZURpZmZlciA9IHRoaXMuZGlmZmVycy5maW5kKHRoaXMuc291cmNlKS5jcmVhdGUobnVsbCk7XG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlZERlc3RpbmF0aW9uKCkge1xuXHRcdGlmICh0aGlzLmRlc3RpbmF0aW9uICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHRoaXMuZGVzdGluYXRpb25EaWZmZXIgPSB0aGlzLmRpZmZlcnMuZmluZCh0aGlzLmRlc3RpbmF0aW9uKS5jcmVhdGUobnVsbCk7XG5cdFx0fVxuXHR9XG5cblx0ZGlyZWN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmZvcm1hdC5kaXJlY3Rpb24gPT09IER1YWxMaXN0Q29tcG9uZW50LkxUUjtcblx0fVxuXG5cdGRyYWdFbmQobGlzdDogQmFzaWNMaXN0ID0gbnVsbCk6IGJvb2xlYW4ge1xuXHRcdGlmIChsaXN0KSB7XG5cdFx0XHRsaXN0LmRyYWdTdGFydCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmF2YWlsYWJsZS5kcmFnU3RhcnQgPSBmYWxzZTtcblx0XHRcdHRoaXMuY29uZmlybWVkLmRyYWdTdGFydCA9IGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRkcmFnKGV2ZW50OiBEcmFnRXZlbnQsIGl0ZW06IGFueSwgbGlzdDogQmFzaWNMaXN0KSB7XG5cdFx0aWYgKCF0aGlzLmlzSXRlbVNlbGVjdGVkKGxpc3QucGljaywgaXRlbSkpIHtcblx0XHRcdHRoaXMuc2VsZWN0SXRlbShsaXN0LnBpY2ssIGl0ZW0pO1xuXHRcdH1cblx0XHRsaXN0LmRyYWdTdGFydCA9IHRydWU7XG5cblx0XHQvLyBTZXQgYSBjdXN0b20gdHlwZSB0byBiZSB0aGlzIGR1YWwtbGlzdCdzIGlkLlxuXHRcdGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKHRoaXMuaWQsIGl0ZW1bJ19pZCddKTtcblx0fVxuXG5cdGFsbG93RHJvcChldmVudDogRHJhZ0V2ZW50LCBsaXN0OiBCYXNpY0xpc3QpOiBib29sZWFuIHtcblx0XHRpZiAoZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzLmxlbmd0aCAmJiAoZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSB0aGlzLmlkKSkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGlmICghbGlzdC5kcmFnU3RhcnQpIHtcblx0XHRcdFx0bGlzdC5kcmFnT3ZlciA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGRyYWdMZWF2ZSgpIHtcblx0XHR0aGlzLmF2YWlsYWJsZS5kcmFnT3ZlciA9IGZhbHNlO1xuXHRcdHRoaXMuY29uZmlybWVkLmRyYWdPdmVyID0gZmFsc2U7XG5cdH1cblxuXHRkcm9wKGV2ZW50OiBEcmFnRXZlbnQsIGxpc3Q6IEJhc2ljTGlzdCkge1xuXHRcdGlmIChldmVudC5kYXRhVHJhbnNmZXIudHlwZXMubGVuZ3RoICYmIChldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09IHRoaXMuaWQpKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5kcmFnTGVhdmUoKTtcblx0XHRcdHRoaXMuZHJhZ0VuZCgpO1xuXG5cdFx0XHRpZiAobGlzdCA9PT0gdGhpcy5hdmFpbGFibGUpIHtcblx0XHRcdFx0dGhpcy5tb3ZlSXRlbSh0aGlzLmF2YWlsYWJsZSwgdGhpcy5jb25maXJtZWQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5tb3ZlSXRlbSh0aGlzLmNvbmZpcm1lZCwgdGhpcy5hdmFpbGFibGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgdHJ1ZVVwKCkge1xuXHRcdGxldCBjaGFuZ2VkID0gZmFsc2U7XG5cblx0XHQvLyBDbGVhciByZW1vdmVkIGl0ZW1zLlxuXHRcdGxldCBwb3MgPSB0aGlzLmRlc3RpbmF0aW9uLmxlbmd0aDtcblx0XHR3aGlsZSAoKHBvcyAtPSAxKSA+PSAwKSB7XG5cdFx0XHRjb25zdCBtdiA9IHRoaXMuY29uZmlybWVkLmxpc3QuZmlsdGVyKCBjb25mID0+IHtcblx0XHRcdFx0aWYgKHR5cGVvZiB0aGlzLmRlc3RpbmF0aW9uW3Bvc10gPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbmYuX2lkID09PSB0aGlzLmRlc3RpbmF0aW9uW3Bvc11bdGhpcy5rZXldO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBjb25mLl9pZCA9PT0gdGhpcy5kZXN0aW5hdGlvbltwb3NdO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChtdi5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0Ly8gTm90IGZvdW5kIHNvIHJlbW92ZS5cblx0XHRcdFx0dGhpcy5kZXN0aW5hdGlvbi5zcGxpY2UocG9zLCAxKTtcblx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHVzaCBhZGRlZCBpdGVtcy5cblx0XHRmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5jb25maXJtZWQubGlzdC5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuXHRcdFx0bGV0IG12ID0gdGhpcy5kZXN0aW5hdGlvbi5maWx0ZXIoIChkOiBhbnkpID0+IHtcblx0XHRcdFx0aWYgKHR5cGVvZiBkID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdHJldHVybiAoZFt0aGlzLmtleV0gPT09IHRoaXMuY29uZmlybWVkLmxpc3RbaV0uX2lkKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gKGQgPT09IHRoaXMuY29uZmlybWVkLmxpc3RbaV0uX2lkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmIChtdi5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0Ly8gTm90IGZvdW5kIHNvIGFkZC5cblx0XHRcdFx0bXYgPSB0aGlzLnNvdXJjZS5maWx0ZXIoIChvOiBhbnkpID0+IHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIG8gPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gKG9bdGhpcy5rZXldID09PSB0aGlzLmNvbmZpcm1lZC5saXN0W2ldLl9pZCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiAobyA9PT0gdGhpcy5jb25maXJtZWQubGlzdFtpXS5faWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKG12Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHR0aGlzLmRlc3RpbmF0aW9uLnB1c2gobXZbMF0pO1xuXHRcdFx0XHRcdGNoYW5nZWQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGNoYW5nZWQpIHtcblx0XHRcdHRoaXMuZGVzdGluYXRpb25DaGFuZ2UuZW1pdCh0aGlzLmRlc3RpbmF0aW9uKTtcblx0XHR9XG5cdH1cblxuXHRmaW5kSXRlbUluZGV4KGxpc3Q6IEFycmF5PGFueT4sIGl0ZW06IGFueSwga2V5OiBhbnkgPSAnX2lkJykge1xuXHRcdGxldCBpZHggPSAtMTtcblxuXHRcdGZ1bmN0aW9uIG1hdGNoT2JqZWN0KGU6IGFueSkge1xuXHRcdFx0aWYgKGUuX2lkID09PSBpdGVtW2tleV0pIHtcblx0XHRcdFx0aWR4ID0gbGlzdC5pbmRleE9mKGUpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBtYXRjaChlOiBhbnkpIHtcblx0XHRcdGlmIChlLl9pZCA9PT0gaXRlbSkge1xuXHRcdFx0XHRpZHggPSBsaXN0LmluZGV4T2YoZSk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIEFzc3VtcHRpb24gaXMgdGhhdCB0aGUgYXJyYXlzIGRvIG5vdCBoYXZlIGR1cGxpY2F0ZXMuXG5cdFx0aWYgKHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuXHRcdFx0bGlzdC5maWx0ZXIobWF0Y2hPYmplY3QpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsaXN0LmZpbHRlcihtYXRjaCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGlkeDtcblx0fVxuXG5cdHByaXZhdGUgbWFrZVVuYXZhaWxhYmxlKHNvdXJjZTogQmFzaWNMaXN0LCBpdGVtOiBhbnkpIHtcblx0XHRjb25zdCBpZHggPSBzb3VyY2UubGlzdC5pbmRleE9mKGl0ZW0pO1xuXHRcdGlmIChpZHggIT09IC0xKSB7XG5cdFx0XHRzb3VyY2UubGlzdC5zcGxpY2UoaWR4LCAxKTtcblx0XHR9XG5cdH1cblxuXHRtb3ZlSXRlbShzb3VyY2U6IEJhc2ljTGlzdCwgdGFyZ2V0OiBCYXNpY0xpc3QsIGl0ZW06IGFueSA9IG51bGwsIHRydWV1cCA9IHRydWUpIHtcblx0XHRsZXQgaSA9IDA7XG5cdFx0bGV0IGxlbiA9IHNvdXJjZS5waWNrLmxlbmd0aDtcblxuXHRcdGlmIChpdGVtKSB7XG5cdFx0XHRpID0gc291cmNlLmxpc3QuaW5kZXhPZihpdGVtKTtcblx0XHRcdGxlbiA9IGkgKyAxO1xuXHRcdH1cblxuXHRcdGZvciAoOyBpIDwgbGVuOyBpICs9IDEpIHtcblx0XHRcdC8vIElzIHRoZSBwaWNrIHN0aWxsIGluIGxpc3Q/XG5cdFx0XHRsZXQgbXY6IEFycmF5PGFueT4gPSBbXTtcblx0XHRcdGlmIChpdGVtKSB7XG5cdFx0XHRcdGNvbnN0IGlkeCA9IHRoaXMuZmluZEl0ZW1JbmRleChzb3VyY2UucGljaywgaXRlbSk7XG5cdFx0XHRcdGlmIChpZHggIT09IC0xKSB7XG5cdFx0XHRcdFx0bXZbMF0gPSBzb3VyY2UucGlja1tpZHhdO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtdiA9IHNvdXJjZS5saXN0LmZpbHRlciggc3JjID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gKHNyYy5faWQgPT09IHNvdXJjZS5waWNrW2ldLl9pZCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTaG91bGQgb25seSBldmVyIGJlIDFcblx0XHRcdGlmIChtdi5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0Ly8gQWRkIGlmIG5vdCBhbHJlYWR5IGluIHRhcmdldC5cblx0XHRcdFx0aWYgKHRhcmdldC5saXN0LmZpbHRlcih0cmcgPT4gdHJnLl9pZCA9PT0gbXZbMF0uX2lkKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHR0YXJnZXQubGlzdC5wdXNoKCBtdlswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5tYWtlVW5hdmFpbGFibGUoc291cmNlLCBtdlswXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuY29tcGFyZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0YXJnZXQubGlzdC5zb3J0KHRoaXMuY29tcGFyZSk7XG5cdFx0fVxuXG5cdFx0c291cmNlLnBpY2subGVuZ3RoID0gMDtcblxuXHRcdC8vIFVwZGF0ZSBkZXN0aW5hdGlvblxuXHRcdGlmICh0cnVldXApIHtcblx0XHRcdHRoaXMudHJ1ZVVwKCk7XG5cdFx0fVxuXG5cdFx0Ly8gRGVsYXkgZXZlci1zby1zbGlnaHRseSB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9uLlxuXHRcdHNldFRpbWVvdXQoICgpID0+IHtcblx0XHRcdHRoaXMub25GaWx0ZXIoc291cmNlKTtcblx0XHRcdHRoaXMub25GaWx0ZXIodGFyZ2V0KTtcblx0XHR9LCAxMCk7XG5cdH1cblxuXHRpc0l0ZW1TZWxlY3RlZChsaXN0OiBBcnJheTxhbnk+LCBpdGVtOiBhbnkpOiBib29sZWFuIHtcblx0XHRpZiAobGlzdC5maWx0ZXIoZSA9PiBPYmplY3QuaXMoZSwgaXRlbSkpLmxlbmd0aCA+IDApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRzaGlmdENsaWNrKGV2ZW50OiBNb3VzZUV2ZW50LCBpbmRleDogbnVtYmVyLCBzb3VyY2U6IEJhc2ljTGlzdCwgaXRlbTogYW55KSB7XG5cdFx0aWYgKGV2ZW50LnNoaWZ0S2V5ICYmIHNvdXJjZS5sYXN0ICYmICFPYmplY3QuaXMoaXRlbSwgc291cmNlLmxhc3QpKSB7XG5cdFx0XHRjb25zdCBpZHggPSBzb3VyY2Uuc2lmdC5pbmRleE9mKHNvdXJjZS5sYXN0KTtcblx0XHRcdGlmIChpbmRleCA+IGlkeCkge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gKGlkeCArIDEpOyBpIDwgaW5kZXg7IGkgKz0gMSkge1xuXHRcdFx0XHRcdHRoaXMuc2VsZWN0SXRlbShzb3VyY2UucGljaywgc291cmNlLnNpZnRbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGlkeCAhPT0gLTEpIHtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IChpbmRleCArIDEpOyBpIDwgaWR4OyBpICs9IDEpICB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RJdGVtKHNvdXJjZS5waWNrLCBzb3VyY2Uuc2lmdFtpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0c291cmNlLmxhc3QgPSBpdGVtO1xuXHR9XG5cblx0c2VsZWN0SXRlbShsaXN0OiBBcnJheTxhbnk+LCBpdGVtOiBhbnkpIHtcblx0XHRjb25zdCBwayA9IGxpc3QuZmlsdGVyKCAoZTogYW55KSA9PiB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmlzKGUsIGl0ZW0pO1xuXHRcdH0pO1xuXHRcdGlmIChway5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBBbHJlYWR5IGluIGxpc3QsIHNvIGRlc2VsZWN0LlxuXHRcdFx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHBrLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG5cdFx0XHRcdGNvbnN0IGlkeCA9IGxpc3QuaW5kZXhPZihwa1tpXSk7XG5cdFx0XHRcdGlmIChpZHggIT09IC0xKSB7XG5cdFx0XHRcdFx0bGlzdC5zcGxpY2UoaWR4LCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0fVxuXHR9XG5cblx0c2VsZWN0QWxsKHNvdXJjZTogQmFzaWNMaXN0KSB7XG5cdFx0c291cmNlLnBpY2subGVuZ3RoID0gMDtcblx0XHRzb3VyY2UucGljayA9IHNvdXJjZS5zaWZ0LnNsaWNlKDApO1xuXHR9XG5cblx0c2VsZWN0Tm9uZShzb3VyY2U6IEJhc2ljTGlzdCkge1xuXHRcdHNvdXJjZS5waWNrLmxlbmd0aCA9IDA7XG5cdH1cblxuXHRpc0FsbFNlbGVjdGVkKHNvdXJjZTogQmFzaWNMaXN0KTogYm9vbGVhbiB7XG5cdFx0aWYgKHNvdXJjZS5saXN0Lmxlbmd0aCA9PT0gMCB8fCBzb3VyY2UubGlzdC5sZW5ndGggPT09IHNvdXJjZS5waWNrLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlzQW55U2VsZWN0ZWQoc291cmNlOiBCYXNpY0xpc3QpOiBib29sZWFuIHtcblx0XHRpZiAoc291cmNlLnBpY2subGVuZ3RoID4gMCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHByaXZhdGUgdW5waWNrKHNvdXJjZTogQmFzaWNMaXN0KSB7XG5cdFx0Zm9yIChsZXQgaSA9IHNvdXJjZS5waWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG5cdFx0XHRpZiAoc291cmNlLnNpZnQuaW5kZXhPZihzb3VyY2UucGlja1tpXSkgPT09IC0xKSB7XG5cdFx0XHRcdHNvdXJjZS5waWNrLnNwbGljZShpLCAxKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRjbGVhckZpbHRlcihzb3VyY2U6IEJhc2ljTGlzdCkge1xuXHRcdGlmIChzb3VyY2UpIHtcblx0XHRcdHNvdXJjZS5waWNrZXIgPSAnJztcblx0XHRcdHRoaXMub25GaWx0ZXIoc291cmNlKTtcblx0XHR9XG5cdH1cblxuXHRvbkZpbHRlcihzb3VyY2U6IEJhc2ljTGlzdCkge1xuXHRcdGlmIChzb3VyY2UucGlja2VyLmxlbmd0aCA+IDApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGZpbHRlcmVkID0gc291cmNlLmxpc3QuZmlsdGVyKCAoaXRlbTogYW55KSA9PiB7XG5cdFx0XHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVtKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcblx0XHRcdFx0XHRcdGlmIChpdGVtLl9uYW1lICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZTogcmVtb3ZlIHdoZW4gZC50cyBoYXMgbG9jYWxlIGFzIGFuIGFyZ3VtZW50LlxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gaXRlbS5fbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSh0aGlzLmZvcm1hdC5sb2NhbGUpLmluZGV4T2Yoc291cmNlLnBpY2tlci50b0xvY2FsZUxvd2VyQ2FzZSh0aGlzLmZvcm1hdC5sb2NhbGUpKSAhPT0gLTE7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlOiByZW1vdmUgd2hlbiBkLnRzIGhhcyBsb2NhbGUgYXMgYW4gYXJndW1lbnQuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtKS50b0xvY2FsZUxvd2VyQ2FzZSh0aGlzLmZvcm1hdC5sb2NhbGUpLmluZGV4T2Yoc291cmNlLnBpY2tlci50b0xvY2FsZUxvd2VyQ2FzZSh0aGlzLmZvcm1hdC5sb2NhbGUpKSAhPT0gLTE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmU6IHJlbW92ZSB3aGVuIGQudHMgaGFzIGxvY2FsZSBhcyBhbiBhcmd1bWVudC5cblx0XHRcdFx0XHRcdHJldHVybiBpdGVtLnRvTG9jYWxlTG93ZXJDYXNlKHRoaXMuZm9ybWF0LmxvY2FsZSkuaW5kZXhPZihzb3VyY2UucGlja2VyLnRvTG9jYWxlTG93ZXJDYXNlKHRoaXMuZm9ybWF0LmxvY2FsZSkpICE9PSAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb3VyY2Uuc2lmdCA9IGZpbHRlcmVkO1xuXHRcdFx0XHR0aGlzLnVucGljayhzb3VyY2UpO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIFJhbmdlRXJyb3IpIHtcblx0XHRcdFx0XHR0aGlzLmZvcm1hdC5sb2NhbGUgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0c291cmNlLnNpZnQgPSBzb3VyY2UubGlzdDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0c291cmNlLnNpZnQgPSBzb3VyY2UubGlzdDtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG1ha2VJZChpdGVtOiBhbnkpOiBzdHJpbmcgfCBudW1iZXIge1xuXHRcdGlmICh0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdHJldHVybiBpdGVtW3RoaXMua2V5XTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsb3cgZm9yIGNvbXBsZXggbmFtZXMgYnkgcGFzc2luZyBhbiBhcnJheSBvZiBzdHJpbmdzLlxuXHQvLyBFeGFtcGxlOiBbZGlzcGxheV09XCJbICdfdHlwZS5zdWJzdHJpbmcoMCwxKScsICdfbmFtZScgXVwiXG5cdHByb3RlY3RlZCBtYWtlTmFtZShpdGVtOiBhbnksIHNlcGFyYXRvciA9ICdfJyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgZGlzcGxheSA9IHRoaXMuZGlzcGxheTtcblxuXHRcdGZ1bmN0aW9uIGZhbGxiYWNrKGl0bTogYW55KSB7XG5cdFx0XHRzd2l0Y2ggKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdG0pKSB7XG5cdFx0XHRjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuXHRcdFx0XHRyZXR1cm4gaXRtO1xuXHRcdFx0Y2FzZSAnW29iamVjdCBTdHJpbmddJzpcblx0XHRcdFx0cmV0dXJuIGl0bTtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmIChpdG0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJldHVybiBpdG1bZGlzcGxheV07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuICd1bmRlZmluZWQnO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IHN0ciA9ICcnO1xuXG5cdFx0aWYgKHRoaXMuZGlzcGxheSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzd2l0Y2ggKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzLmRpc3BsYXkpKSB7XG5cdFx0XHRjYXNlICdbb2JqZWN0IEZ1bmN0aW9uXSc6XG5cdFx0XHRcdHN0ciA9IHRoaXMuZGlzcGxheShpdGVtKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMuZGlzcGxheS5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuXHRcdFx0XHRcdGlmIChzdHIubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0c3RyID0gc3RyICsgc2VwYXJhdG9yO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICh0aGlzLmRpc3BsYXlbaV0uaW5kZXhPZignLicpID09PSAtMSkge1xuXHRcdFx0XHRcdFx0Ly8gU2ltcGxlLCBqdXN0IGFkZCB0byBzdHJpbmcuXG5cdFx0XHRcdFx0XHRzdHIgPSBzdHIgKyBpdGVtW3RoaXMuZGlzcGxheVtpXV07XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIENvbXBsZXgsIHNvbWUgYWN0aW9uIG5lZWRzIHRvIGJlIHBlcmZvcm1lZFxuXHRcdFx0XHRcdFx0Y29uc3QgcGFydHMgPSB0aGlzLmRpc3BsYXlbaV0uc3BsaXQoJy4nKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgcyA9IGl0ZW1bcGFydHNbMF1dO1xuXHRcdFx0XHRcdFx0aWYgKHMpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIGJydXRlIGZvcmNlXG5cdFx0XHRcdFx0XHRcdGlmIChwYXJ0c1sxXS5pbmRleE9mKCdzdWJzdHJpbmcnKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBudW1zID0gKHBhcnRzWzFdLnN1YnN0cmluZyhwYXJ0c1sxXS5pbmRleE9mKCcoJykgKyAxLCBwYXJ0c1sxXS5pbmRleE9mKCcpJykpKS5zcGxpdCgnLCcpO1xuXG5cdFx0XHRcdFx0XHRcdFx0c3dpdGNoIChudW1zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHRcdFx0XHRcdHN0ciA9IHN0ciArIHMuc3Vic3RyaW5nKHBhcnNlSW50KG51bXNbMF0sIDEwKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlIDI6XG5cdFx0XHRcdFx0XHRcdFx0XHRzdHIgPSBzdHIgKyBzLnN1YnN0cmluZyhwYXJzZUludChudW1zWzBdLCAxMCksIHBhcnNlSW50KG51bXNbMV0sIDEwKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRcdFx0c3RyID0gc3RyICsgcztcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBtZXRob2Qgbm90IGFwcHJvdmVkLCBzbyBqdXN0IGFkZCBzLlxuXHRcdFx0XHRcdFx0XHRcdHN0ciA9IHN0ciArIHM7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRzdHIgPSBmYWxsYmFjayhpdGVtKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0ciA9IGZhbGxiYWNrKGl0ZW0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBzdHI7XG5cdH1cbn1cbiJdfQ==